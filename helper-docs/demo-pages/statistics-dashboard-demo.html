<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Statistics Dashboard - DEMO</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --bg-tertiary: #e9ecef;
            --text-primary: #212529;
            --text-secondary: #6c757d;
            --border-color: #dee2e6;
            --shadow-sm: 0 2px 8px rgba(0,0,0,.08);
            --shadow-md: 0 4px 16px rgba(0,0,0,.12);
            --radius-lg: 1rem;
            --primary: #0d6efd;
        }

        [data-bs-theme="dark"] {
            --bg-primary: #1a1d23;
            --bg-secondary: #212529;
            --bg-tertiary: #2c3034;
            --text-primary: #f8f9fa;
            --text-secondary: #adb5bd;
            --border-color: #495057;
            --shadow-sm: 0 2px 8px rgba(0,0,0,.3);
            --shadow-md: 0 4px 16px rgba(0,0,0,.4);
        }

        body {
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        .page-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            margin-bottom: 2rem;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
        }

        .stat-card {
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            box-shadow: var(--shadow-sm);
            transition: all 0.3s;
            height: 100%;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        .chart-container {
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            box-shadow: var(--shadow-sm);
            margin-bottom: 1.5rem;
        }

        .chart-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .chart-wrapper {
            position: relative;
            height: 300px;
        }

        .chart-wrapper-tall {
            height: 400px;
        }

        .mini-stat {
            text-align: center;
            padding: 1rem;
        }

        .mini-stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
        }

        .mini-stat-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .btn-theme {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
        }

        .btn-theme:hover {
            background: rgba(255, 255, 255, 0.3);
            color: white;
        }

        .badge-custom {
            padding: 0.5rem 1rem;
            border-radius: 1rem;
            font-weight: 600;
        }
    </style>
</head>
<body>

<div class="container-fluid" style="max-width: 1400px; padding: 2rem;">
    
    <!-- Header -->
    <div class="page-header">
        <div class="d-flex justify-content-between align-items-center flex-wrap gap-3">
            <div>
                <h1 class="mb-2">
                    <i class="bi bi-graph-up-arrow me-2"></i>
                    Project Statistics Dashboard
                </h1>
                <p class="mb-0 opacity-75">DEMO Preview</p>
            </div>
            <button class="btn btn-theme" id="themeToggle">
                <i class="bi bi-moon-stars-fill" id="themeIcon"></i>
            </button>
        </div>
    </div>

    <!-- Quick Stats Row -->
    <div class="row g-3 mb-4">
        <div class="col-6 col-md-3">
            <div class="stat-card">
                <div class="mini-stat">
                    <div class="mini-stat-number">24</div>
                    <div class="mini-stat-label">Total Projects</div>
                </div>
            </div>
        </div>
        <div class="col-6 col-md-3">
            <div class="stat-card">
                <div class="mini-stat">
                    <div class="mini-stat-number text-success">12</div>
                    <div class="mini-stat-label">Completed</div>
                </div>
            </div>
        </div>
        <div class="col-6 col-md-3">
            <div class="stat-card">
                <div class="mini-stat">
                    <div class="mini-stat-number text-warning">8</div>
                    <div class="mini-stat-label">In Progress</div>
                </div>
            </div>
        </div>
        <div class="col-6 col-md-3">
            <div class="stat-card">
                <div class="mini-stat">
                    <div class="mini-stat-number text-danger">4</div>
                    <div class="mini-stat-label">Not Started</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Charts Row 1 -->
    <div class="row g-3 mb-3">
        <!-- Project Status Distribution -->
        <div class="col-lg-6">
            <div class="chart-container">
                <div class="chart-title">
                    <i class="bi bi-bar-chart-fill text-primary"></i>
                    Project Status Distribution
                </div>
                <div class="chart-wrapper">
                    <canvas id="statusChart"></canvas>
                </div>
            </div>
        </div>

        <!-- GitHub vs Local -->
        <div class="col-lg-6">
            <div class="chart-container">
                <div class="chart-title">
                    <i class="bi bi-pie-chart-fill text-success"></i>
                    GitHub vs Local Projects
                </div>
                <div class="chart-wrapper">
                    <canvas id="githubChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Charts Row 2 -->
    <div class="row g-3 mb-3">
        <!-- Projects Over Time -->
        <div class="col-lg-8">
            <div class="chart-container">
                <div class="chart-title">
                    <i class="bi bi-graph-up text-info"></i>
                    Projects Created Over Time
                </div>
                <div class="chart-wrapper">
                    <canvas id="timelineChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Most Used Tags -->
        <div class="col-lg-4">
            <div class="chart-container">
                <div class="chart-title">
                    <i class="bi bi-tags-fill text-warning"></i>
                    Most Popular Tags
                </div>
                <div class="chart-wrapper">
                    <canvas id="tagsChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Charts Row 3 -->
    <div class="row g-3">
        <!-- Activity Heatmap -->
        <div class="col-lg-12">
            <div class="chart-container">
                <div class="chart-title">
                    <i class="bi bi-fire text-danger"></i>
                    Project Activity - Days Since Last Worked
                    <span class="badge bg-info ms-2">Shows which projects need attention!</span>
                </div>
                <div class="chart-wrapper chart-wrapper-tall">
                    <canvas id="heatmapChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer Note -->
    <div class="text-center mt-4 p-3">
        <p class="text-muted">
            <i class="bi bi-lightbulb-fill me-2"></i>
            All charts are interactive! Hover over them to see details.
            Click on legends to toggle data series.
        </p>
    </div>

</div>

<script>
// Theme Toggle
const themeToggle = document.getElementById('themeToggle');
const themeIcon = document.getElementById('themeIcon');
const html = document.documentElement;

const savedTheme = localStorage.getItem('theme') || 'light';
html.setAttribute('data-bs-theme', savedTheme);
updateThemeIcon(savedTheme);

themeToggle.addEventListener('click', () => {
    const currentTheme = html.getAttribute('data-bs-theme');
    const newTheme = currentTheme === 'light' ? 'dark' : 'light';
    html.setAttribute('data-bs-theme', newTheme);
    localStorage.setItem('theme', newTheme);
    updateThemeIcon(newTheme);
    updateChartThemes(newTheme);
});

function updateThemeIcon(theme) {
    if (theme === 'dark') {
        themeIcon.className = 'bi bi-sun-fill';
    } else {
        themeIcon.className = 'bi bi-moon-stars-fill';
    }
}

// Chart.js Global Config
Chart.defaults.font.family = "'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif";
Chart.defaults.responsive = true;
Chart.defaults.maintainAspectRatio = false;

// Get theme colors
function getThemeColors() {
    const isDark = html.getAttribute('data-bs-theme') === 'dark';
    return {
        textColor: isDark ? '#f8f9fa' : '#212529',
        gridColor: isDark ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.1)'
    };
}

// 1. Status Distribution Bar Chart
const statusCtx = document.getElementById('statusChart').getContext('2d');
const statusChart = new Chart(statusCtx, {
    type: 'bar',
    data: {
        labels: ['Not Started', 'In Progress', 'Done'],
        datasets: [{
            label: 'Number of Projects',
            data: [4, 8, 12],
            backgroundColor: [
                'rgba(220, 53, 69, 0.7)',
                'rgba(255, 193, 7, 0.7)',
                'rgba(25, 135, 84, 0.7)'
            ],
            borderColor: [
                'rgb(220, 53, 69)',
                'rgb(255, 193, 7)',
                'rgb(25, 135, 84)'
            ],
            borderWidth: 2,
            borderRadius: 8
        }]
    },
    options: {
        plugins: {
            legend: { display: false },
            tooltip: {
                backgroundColor: 'rgba(0,0,0,0.8)',
                padding: 12,
                titleFont: { size: 14 },
                bodyFont: { size: 13 }
            }
        },
        scales: {
            y: {
                beginAtZero: true,
                ticks: { 
                    stepSize: 2,
                    color: getThemeColors().textColor
                },
                grid: { color: getThemeColors().gridColor }
            },
            x: {
                ticks: { color: getThemeColors().textColor },
                grid: { display: false }
            }
        }
    }
});

// 2. GitHub Pie Chart
const githubCtx = document.getElementById('githubChart').getContext('2d');
const githubChart = new Chart(githubCtx, {
    type: 'doughnut',
    data: {
        labels: ['On GitHub', 'Local Only'],
        datasets: [{
            data: [16, 8],
            backgroundColor: [
                'rgba(13, 110, 253, 0.7)',
                'rgba(108, 117, 125, 0.7)'
            ],
            borderColor: [
                'rgb(13, 110, 253)',
                'rgb(108, 117, 125)'
            ],
            borderWidth: 2
        }]
    },
    options: {
        plugins: {
            legend: {
                position: 'bottom',
                labels: {
                    padding: 15,
                    font: { size: 12 },
                    color: getThemeColors().textColor
                }
            },
            tooltip: {
                backgroundColor: 'rgba(0,0,0,0.8)',
                padding: 12,
                callbacks: {
                    label: function(context) {
                        const label = context.label || '';
                        const value = context.parsed;
                        const total = context.dataset.data.reduce((a, b) => a + b, 0);
                        const percentage = ((value / total) * 100).toFixed(1);
                        return `${label}: ${value} projects (${percentage}%)`;
                    }
                }
            }
        }
    }
});

// 3. Projects Over Time Line Chart
const timelineCtx = document.getElementById('timelineChart').getContext('2d');
const timelineChart = new Chart(timelineCtx, {
    type: 'line',
    data: {
        labels: ['Sep', 'Oct', 'Nov', 'Dec', 'Jan', 'Feb'],
        datasets: [{
            label: 'Projects Created',
            data: [2, 5, 3, 7, 4, 3],
            borderColor: 'rgb(13, 110, 253)',
            backgroundColor: 'rgba(13, 110, 253, 0.1)',
            borderWidth: 3,
            fill: true,
            tension: 0.4,
            pointRadius: 5,
            pointHoverRadius: 7,
            pointBackgroundColor: 'rgb(13, 110, 253)',
            pointBorderColor: '#fff',
            pointBorderWidth: 2
        }]
    },
    options: {
        plugins: {
            legend: { display: false },
            tooltip: {
                backgroundColor: 'rgba(0,0,0,0.8)',
                padding: 12
            }
        },
        scales: {
            y: {
                beginAtZero: true,
                ticks: { 
                    stepSize: 1,
                    color: getThemeColors().textColor
                },
                grid: { color: getThemeColors().gridColor }
            },
            x: {
                ticks: { color: getThemeColors().textColor },
                grid: { display: false }
            }
        }
    }
});

// 4. Most Used Tags Horizontal Bar
const tagsCtx = document.getElementById('tagsChart').getContext('2d');
const tagsChart = new Chart(tagsCtx, {
    type: 'bar',
    data: {
        labels: ['Spring Boot', 'React', 'Docker', 'PostgreSQL', 'REST API'],
        datasets: [{
            label: 'Projects',
            data: [12, 10, 8, 7, 6],
            backgroundColor: [
                'rgba(102, 126, 234, 0.7)',
                'rgba(118, 75, 162, 0.7)',
                'rgba(255, 99, 132, 0.7)',
                'rgba(54, 162, 235, 0.7)',
                'rgba(255, 206, 86, 0.7)'
            ],
            borderRadius: 8,
            borderWidth: 0
        }]
    },
    options: {
        indexAxis: 'y',
        plugins: {
            legend: { display: false },
            tooltip: {
                backgroundColor: 'rgba(0,0,0,0.8)',
                padding: 12
            }
        },
        scales: {
            x: {
                beginAtZero: true,
                ticks: { 
                    stepSize: 2,
                    color: getThemeColors().textColor
                },
                grid: { color: getThemeColors().gridColor }
            },
            y: {
                ticks: { color: getThemeColors().textColor },
                grid: { display: false }
            }
        }
    }
});

// 5. Activity Heatmap (Days Since Last Worked)
const heatmapCtx = document.getElementById('heatmapChart').getContext('2d');
const heatmapChart = new Chart(heatmapCtx, {
    type: 'bar',
    data: {
        labels: [
            'E-Commerce Platform', 'Blog CMS', 'Task Manager', 'Chat App',
            'Weather Dashboard', 'Portfolio Site', 'Invoice System', 'Recipe App',
            'Fitness Tracker', 'Budget Planner', 'Note Taking App', 'URL Shortener'
        ],
        datasets: [{
            label: 'Days Since Last Worked',
            data: [2, 5, 7, 10, 15, 18, 21, 25, 30, 45, 60, 90],
            backgroundColor: function(context) {
                const value = context.parsed.y;
                if (value <= 7) return 'rgba(25, 135, 84, 0.7)'; // Green - Active
                if (value <= 30) return 'rgba(255, 193, 7, 0.7)'; // Yellow - Warm
                return 'rgba(220, 53, 69, 0.7)'; // Red - Cold
            },
            borderRadius: 6,
            borderWidth: 0
        }]
    },
    options: {
        indexAxis: 'y',
        plugins: {
            legend: { display: false },
            tooltip: {
                backgroundColor: 'rgba(0,0,0,0.8)',
                padding: 12,
                callbacks: {
                    label: function(context) {
                        const days = context.parsed.x;
                        let status = '';
                        if (days <= 7) status = 'ðŸŸ¢ Active';
                        else if (days <= 30) status = 'ðŸŸ¡ Warm';
                        else status = 'ðŸ”´ Cold';
                        return `${status} - ${days} days ago`;
                    }
                }
            }
        },
        scales: {
            x: {
                beginAtZero: true,
                ticks: { color: getThemeColors().textColor },
                grid: { color: getThemeColors().gridColor }
            },
            y: {
                ticks: { 
                    color: getThemeColors().textColor,
                    font: { size: 11 }
                },
                grid: { display: false }
            }
        }
    }
});

// Update chart themes when theme changes
function updateChartThemes(theme) {
    const colors = getThemeColors();
    
    [statusChart, githubChart, timelineChart, tagsChart, heatmapChart].forEach(chart => {
        if (chart.options.scales) {
            if (chart.options.scales.x) {
                chart.options.scales.x.ticks.color = colors.textColor;
                if (chart.options.scales.x.grid) {
                    chart.options.scales.x.grid.color = colors.gridColor;
                }
            }
            if (chart.options.scales.y) {
                chart.options.scales.y.ticks.color = colors.textColor;
                if (chart.options.scales.y.grid) {
                    chart.options.scales.y.grid.color = colors.gridColor;
                }
            }
        }
        if (chart.options.plugins?.legend?.labels) {
            chart.options.plugins.legend.labels.color = colors.textColor;
        }
        chart.update();
    });
}
</script>

</body>
</html>
